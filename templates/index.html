{% extends "admin_layout.html" %}
{% block content %}

<div class="row mt-4">

    <!-- LEFT SIDE: FORM -->
    <div class="col-md-7">

        <div class="card p-4 shadow-sm border-0 premium-card">
            <h3 class="mb-3 fw-bold text-primary">AI Resume Screening</h3>

            <form action="/predict" method="POST" enctype="multipart/form-data">

                <!-- Candidate Name -->
                <label class="form-label fw-semibold">Candidate Name</label>
                <input type="text" name="name" class="form-control mb-3" required placeholder="Enter candidate name">

                <!-- Drag & Drop Upload -->
                <div id="dropArea" class="drag-area mb-3">

                    <!-- Default UI -->
                    <div id="defaultText" class="text-center">
                        <img src="/static/images/file-icon.png" width="35" class="mb-2">
                        <p class="drag-text m-0">üìÑ Drag & Drop Resume Here</p>
                        <p class="small text-muted">or click to upload</p>
                    </div>

                    <!-- Success message -->
                    <p id="fileSuccess" class="text-success fw-bold d-none mt-2"></p>

                    <!-- Hidden file input -->
                    <input type="file" name="resume_file" id="fileInput">
                </div>

                <p class="text-center fw-bold">OR</p>

                <!-- Paste Resume -->
                <label class="form-label fw-semibold">Paste Resume Text</label>
                <textarea name="resume" class="form-control" rows="10" placeholder="Paste resume text..."></textarea>

                <button class="btn btn-primary mt-3 w-100 py-2 fw-semibold">Analyze Resume</button>

            </form>
        </div>
    </div>

    <!-- RIGHT SIDE: FEATURES PANEL -->
    <div class="col-md-5">
        <div class="card p-4 shadow-sm border-0 premium-info">

            <h4 class="fw-bold">What This Tool Does</h4>

            <ul class="mt-2">
                <li>‚úî AI-powered resume shortlisting</li>
                <li>‚úî Auto skill & experience scoring</li>
                <li>‚úî ML-based job role detection</li>
                <li>‚úî Beautiful dashboard & charts</li>
                <li>‚úî Instant result with score</li>
            </ul>

            <div class="mt-3 p-3 rounded bg-light">
                <p class="fw-semibold mb-1">üîç Supported Formats:</p>
                <p class="text-muted mb-0">PDF, TXT, DOCX</p>
            </div>

        </div>
    </div>

</div>

<!-- DRAG & DROP + SUCCESS MESSAGE SCRIPT -->
<script>
let dropArea = document.getElementById("dropArea");
let fileInput = document.getElementById("fileInput");
let defaultText = document.getElementById("defaultText");
let fileSuccess = document.getElementById("fileSuccess");

// Click to open file dialog
dropArea.addEventListener("click", () => fileInput.click());

// Manual file selection
fileInput.addEventListener("change", function () {
    if (this.files.length > 0) {
        showSuccess(this.files[0]);
    }
});

// Drag events styling
dropArea.addEventListener("dragover", (e) => {
    e.preventDefault();
    dropArea.classList.add("drag-over");
});

dropArea.addEventListener("dragleave", () => {
    dropArea.classList.remove("drag-over");
});

dropArea.addEventListener("drop", (e) => {
    e.preventDefault();
    dropArea.classList.remove("drag-over");

    if (e.dataTransfer.files.length > 0) {
        let file = e.dataTransfer.files[0];
        fileInput.files = e.dataTransfer.files;
        showSuccess(file);
    }
});

// Show success message
function showSuccess(file) {
    dropArea.style.borderColor = "#28a745";   // Green border
    dropArea.style.background = "#eaf7ee";    // Soft green background

    defaultText.classList.add("d-none");
    fileSuccess.classList.remove("d-none");

    fileSuccess.innerHTML = "‚úî File Selected: " + file.name;
}
</script>

{% endblock %}
